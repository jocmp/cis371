<html>
<head>
	<title>week 7 example</title>

	<script language = "javascript">

		function AjaxObj() {
			this.xmlObj = false;
			if(window.XMLHttpRequest)
				this.xmlObj = new XMLHttpRequest();
			else if(window.ActiveXObject)
				this.xmlObj = new ActiveXObject("Microsoft.XMLHTTP");
			this.getData=getAjaxData;
		}

		function getAjaxData(url,f,desc){
			var obj=this.xmlObj;//must do this so anonymous function can access this.xmlObj
			if(obj){
				obj.open("GET", url);
				obj.onreadystatechange = function(){
					if(obj.readyState == 4 && obj.status == 200)
						f(obj.responseText,desc);
				}
				obj.send(null);
			}
		}

		function ajaxStart(){
			var ajax1 = new AjaxObj();
			var ajax2 = new AjaxObj();
			ajax1.getData("week7ePrice.php",ajaxFinish,"Price");
			ajax2.getData("week7eSize.php",ajaxFinish,"Size");
		}

		function ajaxFinish(data,desc){
			var tab=document.getElementById("targetTable");
			var newRow=tab.insertRow(-1);
			var newCell=newRow.insertCell(0);
			var textElement=document.createTextNode(desc);
			newCell.appendChild(textElement);
			newRow.appendChild(newCell);
			var newCell=newRow.insertCell(1);
			var textElement=document.createTextNode(data);
			newCell.appendChild(textElement);
			newRow.appendChild(newCell);
			tab.appendChild(newRow);
		}
  </script>
</head>
<body>
	<H1>An Ajax demo</H1>
  <form>
		<input type = "button" value = "Get Prod Info" onclick = "ajaxStart()">
  </form>

	<div>
		<table id="targetTable">
		</table>
	</div>

</body>
</html>
