<html>
<head>
	<title>week 5 example</title>

	<script language = "javascript">
//why doesn't this work?
//how to fix it?
//what could be done to make it better?

		var XMLHttpRequestObject = false;

		if (window.XMLHttpRequest) {
			XMLHttpRequestObject = new XMLHttpRequest();
		} else if (window.ActiveXObject) {
			XMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
		}

		function getData()
		{
			if(XMLHttpRequestObject) {
				var tab = document.getElementById("targetTable");
				XMLHttpRequestObject.open("GET", "week7ePrice.php");
				XMLHttpRequestObject.onreadystatechange = function()
				{
					if (XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200) {
						var newRow=tab.insertRow(-1);
						var newCell=newRow.insertCell(0);
						var textElement=document.createTextNode("price");
						newCell.appendChild(textElement);
						newRow.appendChild(newCell);
						var newCell=newRow.insertCell(1);
						var textElement=document.createTextNode(XMLHttpRequestObject.responseText);
						newCell.appendChild(textElement);
						newRow.appendChild(newCell);
						tab.appendChild(newRow);
					}
				}
				XMLHttpRequestObject.send(null);

				XMLHttpRequestObject.open("GET", "week7eSize.php");
				XMLHttpRequestObject.onreadystatechange = function()
				{
					if (XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200) {
						var newRow=tab.insertRow(-1);
						var newCell=newRow.insertCell(0);
						var textElement=document.createTextNode("size");
						newCell.appendChild(textElement);
						newRow.appendChild(newCell);
						var newCell=newRow.insertCell(1);
						var textElement=document.createTextNode(XMLHttpRequestObject.responseText);
						newCell.appendChild(textElement);
						newRow.appendChild(newCell);
						tab.appendChild(newRow);
					}
				}
				XMLHttpRequestObject.send(null);
			}
    }
  </script>
</head>
<body>
	<H1>An Ajax demo</H1>
  <form>
		<input type = "button" value = "Get Prod Info" onclick = "getData()">
  </form>

	<div>
		<table id="targetTable">
		</table>
	</div>

</body>
</html>
